var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function p(){return u(" ")}function g(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function d(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function m(e,t){t=""+t,e.data!==t&&(e.data=t)}function f(e,t){(null!=t||e.value)&&(e.value=t)}function b(e,t,n){e.classList[n?"add":"remove"](t)}let k;function y(e){k=e}function v(){if(!k)throw new Error("Function called outside component initialization");return k}function $(e){v().$$.on_destroy.push(e)}const x=[],w=[],_=[],A=[],S=Promise.resolve();let L=!1;function z(e){_.push(e)}function T(){const e=new Set;do{for(;x.length;){const e=x.shift();y(e),R(e.$$)}for(;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];e.has(n)||(n(),e.add(n))}_.length=0}while(x.length);for(;A.length;)A.pop()();L=!1}function R(e){e.fragment&&(e.update(e.dirty),r(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(z))}const q=new Set;let C;function I(e,t){e&&e.i&&(q.delete(e),e.i(t))}function j(e,t,n,r){if(e&&e.o){if(q.has(e))return;q.add(e),C.c.push(()=>{q.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function E(e,n,s){const{fragment:l,on_mount:o,on_destroy:a,after_update:c}=e.$$;l.m(n,s),z(()=>{const n=o.map(t).filter(i);a?a.push(...n):r(n),e.$$.on_mount=[]}),c.forEach(z)}function Z(e,t){e.$$.fragment&&(r(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function H(e,t){e.$$.dirty||(x.push(e),L||(L=!0,S.then(T)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function M(t,i,s,l,o,a){const c=k;y(t);const h=i.props||{},u=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:null};let p=!1;var g;u.ctx=s?s(t,h,(e,n,r=n)=>(u.ctx&&o(u.ctx[e],u.ctx[e]=r)&&(u.bound[e]&&u.bound[e](r),p&&H(t,e)),n)):h,u.update(),p=!0,r(u.before_update),u.fragment=l(u.ctx),i.target&&(i.hydrate?u.fragment.l((g=i.target,Array.from(g.childNodes))):u.fragment.c(),i.intro&&I(t.$$.fragment),E(t,i.target,i.anchor),T()),y(c)}class O{$destroy(){Z(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function U(t){var n;return{c(){(n=h("div")).innerHTML='<header><a href="/hamsa" class="logo svelte-elyn56"><img src="images/hamsa-logo-opt.jpg" alt="HAMSA logo" class="hamsa-logo svelte-elyn56"></a> <div class="monastery-header-text"><h1 class="title">Himalayan Academy</h1> <h2 class="subtitle">Museum of Spiritual Arts</h2> <div style="flex: auto"></div></div> <a href="/" class="monastery-logo svelte-elyn56"><img class="monastery-logo svelte-elyn56" src="images/monastery-logo.png" alt="Monastery Logo"></a></header>'},m(e,t){o(e,n,t)},p:e,i:e,o:e,d(e){e&&a(n)}}}class N extends O{constructor(e){super(),M(this,e,null,U,s,[])}}function P(t){var n;return{c(){(n=h("div")).innerHTML='<div class="hero svelte-nxvt8o"><figure class="hero1 svelte-nxvt8o"><img src="images/hero2.jpg" alt="" class="hero svelte-nxvt8o"></figure> <figure class="hero2 fade svelte-nxvt8o"><img src="images/hero1.jpg" alt=""></figure></div>'},m(e,t){o(e,n,t)},p:e,i:e,o:e,d(e){e&&a(n)}}}class F extends O{constructor(e){super(),M(this,e,null,P,s,[])}}const B=[];const D=function(t,n=e){let r;const i=[];function l(e){if(s(t,e)&&(t=e,r)){const e=!B.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),B.push(n,t)}if(e){for(let e=0;e<B.length;e+=2)B[e][0](B[e+1]);B.length=0}}}return{set:l,update:function(e){l(e(t))},subscribe:function(s,o=e){const a=[s,o];return i.push(a),1===i.length&&(r=n(l)||e),s(t),()=>{const e=i.indexOf(a);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}({view:"Collection",data:{}}),V=(e,t)=>{history.pushState({view:e,data:t},`HAMSA - ${e}`),D.set({view:e,data:t})};function G(e,t,n){const r=Object.create(e);return r.item=t[n],r}function J(e){var t,n,r,i=e.item+"";function s(){return e.click_handler(e)}return{c(){t=h("li"),n=u(i),d(t,"class","list-item svelte-15hgir4"),r=g(t,"click",s)},m(e,r){o(e,t,r),l(t,n)},p(t,r){e=r,t.items&&i!==(i=e.item+"")&&m(n,i)},d(e){e&&a(t),r()}}}function X(t){var n,r,i,s,f,k,y,v,$;let x=t.items,w=[];for(let e=0;e<x.length;e+=1)w[e]=J(G(t,x,e));return{c(){n=h("div"),r=h("div"),i=h("span"),s=u(t.title),f=p(),k=h("i"),y=p(),v=h("ul");for(let e=0;e<w.length;e+=1)w[e].c();d(i,"class","title"),d(k,"class","fa fa-caret-down"),d(r,"class","selector-text svelte-15hgir4"),d(v,"class","selector-content svelte-15hgir4"),b(v,"open",t.open),d(n,"class","round-wrapper is-selector-categories svelte-15hgir4"),$=g(n,"click",t.click_handler_1)},m(e,t){o(e,n,t),l(n,r),l(r,i),l(i,s),l(r,f),l(r,k),l(n,y),l(n,v);for(let e=0;e<w.length;e+=1)w[e].m(v,null)},p(e,t){if(e.title&&m(s,t.title),e.items){let n;for(x=t.items,n=0;n<x.length;n+=1){const r=G(t,x,n);w[n]?w[n].p(e,r):(w[n]=J(r),w[n].c(),w[n].m(v,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=x.length}e.open&&b(v,"open",t.open)},i:e,o:e,d(e){e&&a(n),c(w,e),$()}}}function Y(e,t,n){let{title:r="untitled",items:i=[],key:s="item"}=t,l=!1;const o=e=>{console.log("clicked",e);let t={};t[s]=e,V("Collection",t)};return e.$set=(e=>{"title"in e&&n("title",r=e.title),"items"in e&&n("items",i=e.items),"key"in e&&n("key",s=e.key)}),{title:r,items:i,key:s,open:l,onClick:o,click_handler:({item:e})=>{o(e)},click_handler_1:()=>n("open",l=!l)}}class K extends O{constructor(e){super(),M(this,e,Y,X,s,["title","items","key"])}}function Q(t){var n,i,s,c,u;return{c(){n=h("div"),i=h("input"),s=p(),c=h("i"),d(i,"class","search svelte-806y3v"),d(i,"placeholder","Search"),d(c,"class","fa fa-search"),d(n,"class","round-wrapper is-search-box svelte-806y3v"),u=[g(i,"input",t.input_input_handler),g(i,"keydown",t.search)]},m(e,r){o(e,n,r),l(n,i),f(i,t.query),l(n,s),l(n,c)},p(e,t){e.query&&i.value!==t.query&&f(i,t.query)},i:e,o:e,d(e){e&&a(n),r(u)}}}function W(e,t,n){let r;return{query:r,search:function(e){"Enter"===e.key&&(console.log("search",r),V("Collection",{query:r}))},input_input_handler:function(){r=this.value,n("query",r)}}}class ee extends O{constructor(e){super(),M(this,e,W,Q,s,[])}}var te=function(e){e=Array.isArray(e)?e.join(""):e;var t=ne.exec(e);return function(n){var r={query:e};if(n&&(r.variables=JSON.stringify(n)),t&&t.length){var i=t[2];i&&(r.operationName=t[2])}return JSON.stringify(r)}},ne=/(query|mutation) ?([\w\d-_]+)? ?\(.*?\)? \{/;const re=async()=>{let e=te`
      query {
        collections
        artists
        keywords
      }
    `;return le(e)},ie=async e=>{let t=te`
    query($limit: Int!, $offset: Int!, $keyword: String, $artist: String, $query: String) { 
        images( limit: $limit offset: $offset keyword: $keyword artist: $artist query: $query  ) { 
          thumbnail, 
          checksum 
        } } 
    `;return le(t,e)},se=async e=>{let t=te`
  query($checksum: String!) { 
      image( checksum: $checksum) { 
        path, 
        medpath,
        width,
        height,
        metadata {
          artist,
          description,
          more,
          keywords
        } 
      } } 
  `;return le(t,e)},le=async(e,t)=>{try{const n=await fetch("http://dev.himalayanacademy.com/hamsa/api/index.php",{body:e(t),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}});return(await n.json()).data}catch(e){throw console.error("GraphQL Error",e),e}};function oe(e){var t,n,r,i,s,c,u,m,f=new K({props:{title:"Tags",key:"keyword",items:e.keywordList}}),b=new K({props:{title:"Artists",key:"artist",items:e.artistsList}}),k=new K({props:{title:"Collections",key:"collection",items:e.collectionList}}),y=new ee({});return{c(){t=h("div"),(n=h("div")).innerHTML="<span>i</span>",r=p(),f.$$.fragment.c(),i=p(),b.$$.fragment.c(),s=p(),k.$$.fragment.c(),c=p(),y.$$.fragment.c(),d(n,"class","bolotinha svelte-1qalh13"),d(t,"class","selector-controls svelte-1qalh13"),m=g(n,"click",e.goInfo)},m(e,a){o(e,t,a),l(t,n),l(t,r),E(f,t,null),l(t,i),E(b,t,null),l(t,s),E(k,t,null),l(t,c),E(y,t,null),u=!0},p(e,t){var n={};e.keywordList&&(n.items=t.keywordList),f.$set(n);var r={};e.artistsList&&(r.items=t.artistsList),b.$set(r);var i={};e.collectionList&&(i.items=t.collectionList),k.$set(i)},i(e){u||(I(f.$$.fragment,e),I(b.$$.fragment,e),I(k.$$.fragment,e),I(y.$$.fragment,e),u=!0)},o(e){j(f.$$.fragment,e),j(b.$$.fragment,e),j(k.$$.fragment,e),j(y.$$.fragment,e),u=!1},d(e){e&&a(t),Z(f),Z(b),Z(k),Z(y),m()}}}function ae(e,t,n){let r=[],i=[],s=[];var l;l=(async()=>{let e=await re();n("artistsList",r=e.artists.sort()),n("collectionList",i=e.collections.sort()),n("keywordList",s=e.keywords.sort()),console.log("selectors data",e)}),v().$$.on_mount.push(l);return{artistsList:r,collectionList:i,keywordList:s,goInfo:()=>{V("InfoPage")}}}class ce extends O{constructor(e){super(),M(this,e,ae,oe,s,[])}}function he(t){var n,r,i,s,c;return{c(){n=h("div"),(r=h("div")).innerHTML='<h1 id="welcome-to-hamsa">Welcome to HAMSA</h1> <p>Indian spiritual art has no equal in the world, either in scope or sheer quantity. For five decades the monks\n\t\t\t            at Kauai’s Hindu Monastery in Hawaii have been commissioning and collecting original works of art for our\n\t\t\t            many publications, apps and web projects. Among the thousands of images you will find rare masterpieces,\n\t\t\t            educational depictions of Hindu culture, legend, deities and philosophy, sacred religious symbols,\n\t\t\t            illustrated alphabets, children’s stories and decorative borders. For decades this treasure trove was hidden\n\t\t\t            in the binary recesses of our server (even we could barely find things). Now the entire collection is\n\t\t\t            available to you through the Himalayan Academy Museum of Spiritual Art. In Sanskrit hamsa is the word for\n\t\t\t            the Indian Goose (Anser indicus) or a swan, and represents the Ultimate Reality and the spiritually pure\n\t\t\t            soul. The flight of the hamsa symbolizes moksha, the release from the cycle of samsara.</p> <p>You can search by key word, artist or collection. The download button will save the highest available\n\t\t\t            resolution file to your computer. You may use these images freely in service to dharma. However, if your use\n\t\t\t            is commercial, you must get written permission from the copyright holder, Himalayan Academy, by writing to:\n\t\t\t            <a href="mailto:contact@hindu.org">contact@hindu.org</a>.</p>',i=p(),(s=h("button")).textContent="Go back",d(s,"class","back-button svelte-5zgyg"),d(n,"class","info info-blurb svelte-5zgyg"),c=g(s,"click",ue)},m(e,t){o(e,n,t),l(n,r),l(n,i),l(n,s)},p:e,i:e,o:e,d(e){e&&a(n),c()}}}const ue=()=>history.back();class pe extends O{constructor(e){super(),M(this,e,null,he,s,[])}}var ge,de=(function(e,t){!function(t){var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:f,table:f,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||x.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=p(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=p(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=p(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=p(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=p(n._paragraph).replace("hr",n.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",n._tag).getRegex(),n.blockquote=p(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=b({},n),n.gfm=b({},n.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=b({},n.normal,{html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:f,paragraph:p(n.normal._paragraph).replace("hr",n.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",n.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),r.rules=n,r.lex=function(e,t){return new r(t).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t){var r,i,s,l,o,a,c,u,p,g,d,m,f,b,v,$;for(e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e)){var x=this.tokens[this.tokens.length-1];e=e.substring(s[0].length),x&&"paragraph"===x.type?x.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:y(s,"\n")}))}else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(e))&&(a={type:"table",header:k(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(s[0].length),d=0;d<a.align.length;d++)/^ *-+: *$/.test(a.align[d])?a.align[d]="right":/^ *:-+: *$/.test(a.align[d])?a.align[d]="center":/^ *:-+ *$/.test(a.align[d])?a.align[d]="left":a.align[d]=null;for(d=0;d<a.cells.length;d++)a.cells[d]=k(a.cells[d],a.header.length);this.tokens.push(a)}else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),c={type:"list_start",ordered:b=(l=s[2]).length>1,start:b?+l:"",loose:!1},this.tokens.push(c),u=[],r=!1,f=(s=s[0].match(this.rules.item)).length,d=0;d<f;d++)g=(a=s[d]).length,~(a=a.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(g-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+g+"}","gm"),"")),d!==f-1&&(o=n.bullet.exec(s[d+1])[0],(l.length>1?1===o.length:o.length>1||this.options.smartLists&&o!==l)&&(e=s.slice(d+1).join("\n")+e,d=f-1)),i=r||/\n\n(?!\s*$)/.test(a),d!==f-1&&(r="\n"===a.charAt(a.length-1),i||(i=r)),i&&(c.loose=!0),$=void 0,(v=/^\[[ xX]\] /.test(a))&&($=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),p={type:"list_item_start",task:v,checked:$,loose:i},u.push(p),this.tokens.push(p),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(f=u.length,d=0;d<f;d++)u[d].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):h(s[0]):s[0]});else if(t&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),m=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[m]||(this.tokens.links[m]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(e))&&(a={type:"table",header:k(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(s[0].length),d=0;d<a.align.length;d++)/^ *-+: *$/.test(a.align[d])?a.align[d]="right":/^ *:-+: *$/.test(a.align[d])?a.align[d]="center":/^ *:-+ *$/.test(a.align[d])?a.align[d]="left":a.align[d]=null;for(d=0;d<a.cells.length;d++)a.cells[d]=k(a.cells[d].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(t&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var i={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:f,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:f,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function s(e,t){if(this.options=t||x.defaults,this.links=e,this.rules=i.normal,this.renderer=this.options.renderer||new l,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.options.breaks?this.rules=i.breaks:this.rules=i.gfm)}function l(e){this.options=e||x.defaults}function o(){}function a(e){this.tokens=[],this.token=null,this.options=e||x.defaults,this.options.renderer=this.options.renderer||new l,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new c}function c(){this.seen={}}function h(e,t){if(t){if(h.escapeTest.test(e))return e.replace(h.escapeReplace,function(e){return h.replacements[e]})}else if(h.escapeTestNoEncode.test(e))return e.replace(h.escapeReplaceNoEncode,function(e){return h.replacements[e]});return e}function u(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function p(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function g(e,t,n){if(e){try{var r=decodeURIComponent(u(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!m.test(n)&&(n=function(e,t){d[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?d[" "+e]=e+"/":d[" "+e]=y(e,"/",!0));return e=d[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}i._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",i.em=p(i.em).replace(/punctuation/g,i._punctuation).getRegex(),i._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,i._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,i.autolink=p(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex(),i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,i.tag=p(i.tag).replace("comment",n._comment).replace("attribute",i._attribute).getRegex(),i._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,i._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,i.link=p(i.link).replace("label",i._label).replace("href",i._href).replace("title",i._title).getRegex(),i.reflink=p(i.reflink).replace("label",i._label).getRegex(),i.normal=b({},i),i.pedantic=b({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",i._label).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",i._label).getRegex()}),i.gfm=b({},i.normal,{escape:p(i.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),i.gfm.url=p(i.gfm.url,"i").replace("email",i.gfm._extended_email).getRegex(),i.breaks=b({},i.gfm,{br:p(i.br).replace("{2,}","*").getRegex(),text:p(i.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),s.rules=i,s.output=function(e,t,n){return new s(t,n).output(e)},s.prototype.output=function(e){for(var t,n,r,i,l,o,a="";e;)if(l=this.rules.escape.exec(e))e=e.substring(l[0].length),a+=h(l[1]);else if(l=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(l[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(l[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(l[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(l[0])&&(this.inRawBlock=!1),e=e.substring(l[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):h(l[0]):l[0];else if(l=this.rules.link.exec(e)){var c=v(l[2],"()");if(c>-1){var u=4+l[1].length+c;l[2]=l[2].substring(0,c),l[0]=l[0].substring(0,u).trim(),l[3]=""}e=e.substring(l[0].length),this.inLink=!0,r=l[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],i=t[3]):i="":i=l[3]?l[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(l,{href:s.escapes(r),title:s.escapes(i)}),this.inLink=!1}else if((l=this.rules.reflink.exec(e))||(l=this.rules.nolink.exec(e))){if(e=e.substring(l[0].length),t=(l[2]||l[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=l[0].charAt(0),e=l[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(l,t),this.inLink=!1}else if(l=this.rules.strong.exec(e))e=e.substring(l[0].length),a+=this.renderer.strong(this.output(l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.em.exec(e))e=e.substring(l[0].length),a+=this.renderer.em(this.output(l[6]||l[5]||l[4]||l[3]||l[2]||l[1]));else if(l=this.rules.code.exec(e))e=e.substring(l[0].length),a+=this.renderer.codespan(h(l[2].trim(),!0));else if(l=this.rules.br.exec(e))e=e.substring(l[0].length),a+=this.renderer.br();else if(l=this.rules.del.exec(e))e=e.substring(l[0].length),a+=this.renderer.del(this.output(l[1]));else if(l=this.rules.autolink.exec(e))e=e.substring(l[0].length),r="@"===l[2]?"mailto:"+(n=h(this.mangle(l[1]))):n=h(l[1]),a+=this.renderer.link(r,null,n);else if(this.inLink||!(l=this.rules.url.exec(e))){if(l=this.rules.text.exec(e))e=e.substring(l[0].length),this.inRawBlock?a+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):h(l[0]):l[0]):a+=this.renderer.text(h(this.smartypants(l[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===l[2])r="mailto:"+(n=h(l[0]));else{do{o=l[0],l[0]=this.rules._backpedal.exec(l[0])[0]}while(o!==l[0]);n=h(l[0]),r="www."===l[1]?"http://"+n:n}e=e.substring(l[0].length),a+=this.renderer.link(r,null,n)}return a},s.escapes=function(e){return e?e.replace(s.rules._escapes,"$1"):e},s.prototype.outputLink=function(e,t){var n=t.href,r=t.title?h(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,h(e[1]))},s.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},s.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},l.prototype.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(n=!0,e=i)}return r?'<pre><code class="'+this.options.langPrefix+h(r,!0)+'">'+(n?e:h(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:h(e,!0))+"</code></pre>"},l.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},l.prototype.html=function(e){return e},l.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},l.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},l.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},l.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},l.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},l.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},l.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},l.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},l.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},l.prototype.strong=function(e){return"<strong>"+e+"</strong>"},l.prototype.em=function(e){return"<em>"+e+"</em>"},l.prototype.codespan=function(e){return"<code>"+e+"</code>"},l.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},l.prototype.del=function(e){return"<del>"+e+"</del>"},l.prototype.link=function(e,t,n){if(null===(e=g(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+h(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},l.prototype.image=function(e,t,n){if(null===(e=g(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},l.prototype.text=function(e){return e},o.prototype.strong=o.prototype.em=o.prototype.codespan=o.prototype.del=o.prototype.text=function(e){return e},o.prototype.link=o.prototype.image=function(e,t,n){return""+n},o.prototype.br=function(){return""},a.parse=function(e,t){return new a(t).parse(e)},a.prototype.parse=function(e){this.inline=new s(e.links,this.options),this.inlineText=new s(e.links,b({},this.options,{renderer:new o})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},a.prototype.next=function(){return this.token=this.tokens.pop(),this.token},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,u(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i="",s="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});s+=this.renderer.tablerow(n)}return this.renderer.table(i,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var l=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,l,o);case"list_item_start":s="";var a=this.token.loose,c=this.token.checked,h=this.token.task;for(this.token.task&&(s+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)s+=a||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(s,h,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var p='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(p);console.log(p)}},c.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var n=t;do{this.seen[n]++,t=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},h.escapeTest=/[&<>"']/,h.escapeReplace=/[&<>"']/g,h.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,h.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var d={},m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function f(){}function b(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function k(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,i=t;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function y(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var i=e.charAt(e.length-r-1);if(i!==t||n){if(i===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function v(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&--n<0)return r;return-1}function $(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function x(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null),$(t=b({},x.defaults,t||{}));var i,s,l=t.highlight,o=0;try{i=r.lex(e,t)}catch(e){return n(e)}s=i.length;var c=function(e){if(e)return t.highlight=l,n(e);var r;try{r=a.parse(i,t)}catch(t){e=t}return t.highlight=l,e?n(e):n(null,r)};if(!l||l.length<3)return c();if(delete t.highlight,!s)return c();for(;o<i.length;o++)!function(e){"code"!==e.type?--s||c():l(e.text,e.lang,function(t,n){return t?c(t):null==n||n===e.text?--s||c():(e.text=n,e.escaped=!0,void(--s||c()))})}(i[o])}else try{return t&&(t=b({},x.defaults,t)),$(t),a.parse(r.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||x.defaults).silent)return"<p>An error occurred:</p><pre>"+h(e.message+"",!0)+"</pre>";throw e}}f.exec=f,x.options=x.setOptions=function(e){return b(x.defaults,e),x},x.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new l,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},x.defaults=x.getDefaults(),x.Parser=a,x.parser=a.parse,x.Renderer=l,x.TextRenderer=o,x.Lexer=r,x.lexer=r.lex,x.InlineLexer=s,x.inlineLexer=s.output,x.Slugger=c,x.parse=x,e.exports=x}()}(ge={exports:{}},ge.exports),ge.exports);function me(e,t,n){const r=Object.create(e);return r.item=t[n],r}function fe(e){var t,n,r,i,s,u="home"!==e.collection&&ke(e);let g=e.images,m=[];for(let t=0;t<g.length;t+=1)m[t]=$e(me(e,g,t));let f=null;return g.length||(f=ve(e)).c(),{c(){u&&u.c(),t=p(),n=h("div"),r=h("div"),i=p(),s=h("section");for(let e=0;e<m.length;e+=1)m[e].c();d(r,"class","collection-inner svelte-2ovhb3"),d(s,"class","g svelte-2ovhb3"),d(n,"class","collection")},m(e,a){u&&u.m(e,a),o(e,t,a),o(e,n,a),l(n,r),l(n,i),l(n,s);for(let e=0;e<m.length;e+=1)m[e].m(s,null);f&&f.m(s,null)},p(e,n){if("home"!==n.collection?u?u.p(e,n):((u=ke(n)).c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),e.thumbnailToURL||e.images||e.collection){let t;for(g=n.images,t=0;t<g.length;t+=1){const r=me(n,g,t);m[t]?m[t].p(e,r):(m[t]=$e(r),m[t].c(),m[t].m(s,null))}for(;t<m.length;t+=1)m[t].d(1);m.length=g.length}!g.length&&f?f.p(e,n):g.length?f&&(f.d(1),f=null):((f=ve(n)).c(),f.m(s,null))},d(e){u&&u.d(e),e&&(a(t),a(n)),c(m,e),f&&f.d()}}}function be(t){var n;return{c(){(n=h("div")).innerHTML='<i class="fa fa-spinner fa-spin fa-3x"></i>',d(n,"class","loading-wrapper")},m(e,t){o(e,n,t)},p:e,d(e){e&&a(n)}}}function ke(e){var t,n,r,i,s,c,g,f=e.collectionThumb&&ye(e);return{c(){t=h("div"),n=h("h3"),r=u(e.collection),i=p(),s=h("div"),f&&f.c(),c=p(),g=h("p"),d(n,"class","collection-title svelte-2ovhb3"),d(g,"class","collection-description svelte-2ovhb3"),d(s,"class","collection-metadata svelte-2ovhb3"),d(t,"class","collection-header svelte-2ovhb3")},m(a,h){o(a,t,h),l(t,n),l(n,r),l(t,i),l(t,s),f&&f.m(s,null),l(s,c),l(s,g),g.innerHTML=e.description},p(e,t){e.collection&&m(r,t.collection),t.collectionThumb?f?f.p(e,t):((f=ye(t)).c(),f.m(s,c)):f&&(f.d(1),f=null),e.description&&(g.innerHTML=t.description)},d(e){e&&a(t),f&&f.d()}}}function ye(e){var t,n,r;return{c(){d(t=h("img"),"src",e.collectionThumb),d(t,"alt",n="photo: "+e.collection),d(t,"class","svelte-2ovhb3"),b(t,"hidden",!e.collectionThumb),r=g(t,"error",e.error_handler)},m(e,n){o(e,t,n)},p(e,r){e.collectionThumb&&d(t,"src",r.collectionThumb),e.collection&&n!==(n="photo: "+r.collection)&&d(t,"alt",n),e.collectionThumb&&b(t,"hidden",!r.collectionThumb)},d(e){e&&a(t),r()}}}function ve(e){var t,n,r,i;return{c(){t=h("p"),n=u("Sorry but we couldn't find images related to "),r=u(e.collection),i=u(".\r\n          "),d(t,"class","no-collection svelte-2ovhb3")},m(e,s){o(e,t,s),l(t,n),l(t,r),l(t,i)},p(e,t){e.collection&&m(r,t.collection)},d(e){e&&a(t)}}}function $e(e){var t,n,r,i,s,c;function u(){return e.click_handler(e)}return{c(){t=h("div"),n=h("figure"),r=h("img"),s=p(),d(r,"src",i=e.thumbnailToURL(e.item.thumbnail)),d(r,"alt",""),d(r,"class","svelte-2ovhb3"),d(n,"class","svelte-2ovhb3"),d(t,"class","gi svelte-2ovhb3"),c=g(n,"click",u)},m(e,i){o(e,t,i),l(t,n),l(n,r),l(t,s)},p(t,n){e=n,t.images&&i!==(i=e.thumbnailToURL(e.item.thumbnail))&&d(r,"src",i)},d(e){e&&a(t),c()}}}function xe(t){var n;function r(e,t){return 0==t.images.length?be:fe}var i=r(0,t),s=i(t);return{c(){n=h("div"),s.c()},m(e,t){o(e,n,t),s.m(n,null)},p(e,t){i===(i=r(0,t))&&s?s.p(e,t):(s.d(1),(s=i(t))&&(s.c(),s.m(n,null)))},i:e,o:e,d(e){e&&a(n),s.d()}}}let we=0,_e="//dev.himalayanacademy.com/hamsa-images";function Ae(e,t,n){let r="",i=[],s="home",l=!1;const o=e=>{let t=e.toLowerCase().replace(/\s+/g,"-").replace(/\./g,"");fetch(`//dev.himalayanacademy.com/hamsa-images/_texts/${t}.txt`).then(e=>e.text()).then(e=>n("description",r=de(e)))},a=e=>{let t=e.toLowerCase().replace(/\s+/g,"-").replace(/\./g,"");n("collectionThumb",l=`//dev.himalayanacademy.com/hamsa-images/_artists/${t}.jpg`)},c=D.subscribe(e=>{"Collection"==e.view&&(console.dir("view changed",e),(e=>{let t={};if(n("images",i=[]),n("collectionThumb",l=!1),n("description",r=""),!e)return!1;if(t={limit:50,offset:we},e.collection&&"home"!==e.collection){let r=`Collection ${e.collection}`;t.keyword=r,n("collection",s=e.collection),o(r),document.title=`HAMSA - collection: ${r}`}e.keyword&&(t.keyword=e.keyword,n("collection",s=e.keyword),o(e.keyword),document.title=`HAMSA - tag: ${e.keyword}`),e.artist&&(t.artist=e.artist,n("collection",s=e.artist),o(e.artist),a(e.artist),document.title=`HAMSA - Artist: ${e.artist}`),e.query&&(t.query=e.query,n("collection",s=e.query),document.title=`HAMSA - Search: ${e.query}`),console.dir("getting collection",t),ie(t).then(e=>{n("images",i=e.images)})})(e.data))});$(()=>c());return{description:r,images:i,collection:s,collectionThumb:l,thumbnailToURL:e=>{let t=e.replace("/images/","");return`${_e}/${t}`},error_handler:()=>n("collectionThumb",l=!1),click_handler:({item:e})=>V("Image",{checksum:e.checksum})}}class Se extends O{constructor(e){super(),M(this,e,Ae,xe,s,[])}}function Le(e,t,n){const r=Object.create(e);return r.more=t[n],r}function ze(e,t,n){const r=Object.create(e);return r.tag=t[n],r}function Te(e){var t,n,r,i,s,f,b,k,y,v,$,x,w,_,A,S,L,z,T,R,q,C,I,j,E,Z,H,M,O,U,N,P,F,B=e.image.metadata.description+"",D=e.image.metadata.artist+"";let V=e.image.metadata.keywords,G=[];for(let t=0;t<V.length;t+=1)G[t]=qe(ze(e,V,t));let J=e.image.metadata.more,X=[];for(let t=0;t<J.length;t+=1)X[t]=Ce(Le(e,J,t));return{c(){t=h("div"),n=h("div"),r=h("div"),i=h("img"),b=p(),k=h("a"),y=u("Download this image"),x=p(),w=h("p"),_=u(B),A=p(),S=h("div"),L=h("div"),z=h("i"),T=p(),R=h("h2"),q=u(D),C=p(),I=h("div"),j=p(),E=h("div"),(Z=h("h2")).textContent="Tags",H=p();for(let e=0;e<G.length;e+=1)G[e].c();M=p(),O=h("div"),U=p(),(N=h("h3")).textContent="More by the same artist",P=p();for(let e=0;e<X.length;e+=1)X[e].c();d(i,"src",s=e.toImageURL(e.image.medpath)),d(i,"alt",f=e.image.metadata.description),d(k,"href",v=e.toImageURL(e.image.path)),d(k,"target","_blank"),d(k,"download",$=e.toFilename(e.image.path)),d(k,"class","single-image-link svelte-1c853h2"),d(w,"class","description svelte-1c853h2"),d(r,"class","single-image"),d(z,"class","far fa-user fa-lg"),d(L,"class","author svelte-1c853h2"),d(I,"class","dotted"),d(E,"class","tags"),d(O,"class","dotted"),d(S,"class","metadata"),d(n,"class","single-image-wrapper svelte-1c853h2"),d(t,"class","image-view-container svelte-1c853h2"),F=g(L,"click",e.click_handler)},m(e,s){o(e,t,s),l(t,n),l(n,r),l(r,i),l(r,b),l(r,k),l(k,y),l(r,x),l(r,w),l(w,_),l(n,A),l(n,S),l(S,L),l(L,z),l(L,T),l(L,R),l(R,q),l(S,C),l(S,I),l(S,j),l(S,E),l(E,Z),l(E,H);for(let e=0;e<G.length;e+=1)G[e].m(E,null);l(S,M),l(S,O),l(S,U),l(S,N),l(S,P);for(let e=0;e<X.length;e+=1)X[e].m(S,null)},p(e,t){if(e.image&&s!==(s=t.toImageURL(t.image.medpath))&&d(i,"src",s),e.image&&f!==(f=t.image.metadata.description)&&d(i,"alt",f),e.image&&v!==(v=t.toImageURL(t.image.path))&&d(k,"href",v),e.image&&$!==($=t.toFilename(t.image.path))&&d(k,"download",$),e.image&&B!==(B=t.image.metadata.description+"")&&m(_,B),e.image&&D!==(D=t.image.metadata.artist+"")&&m(q,D),e.image){let n;for(V=t.image.metadata.keywords,n=0;n<V.length;n+=1){const r=ze(t,V,n);G[n]?G[n].p(e,r):(G[n]=qe(r),G[n].c(),G[n].m(E,null))}for(;n<G.length;n+=1)G[n].d(1);G.length=V.length}if(e.toThumbnail||e.image){let n;for(J=t.image.metadata.more,n=0;n<J.length;n+=1){const r=Le(t,J,n);X[n]?X[n].p(e,r):(X[n]=Ce(r),X[n].c(),X[n].m(S,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=J.length}},d(e){e&&a(t),c(G,e),c(X,e),F()}}}function Re(t){var n;return{c(){(n=h("div")).innerHTML='<i class="fa fa-spinner fa-spin fa-3x"></i>',d(n,"class","loading-wrapper")},m(e,t){o(e,n,t)},p:e,d(e){e&&a(n)}}}function qe(e){var t,n,r,i,s=e.tag+"";function c(){return e.click_handler_1(e)}return{c(){t=h("span"),n=u(s),r=p(),d(t,"class","tag svelte-1c853h2"),i=g(t,"click",c)},m(e,i){o(e,t,i),l(t,n),l(t,r)},p(t,r){e=r,t.image&&s!==(s=e.tag+"")&&m(n,s)},d(e){e&&a(t),i()}}}function Ce(e){var t,n,r;function i(){return e.click_handler_2(e)}return{c(){d(t=h("img"),"src",n=e.toThumbnail(e.more)),d(t,"alt","more"),d(t,"class","more-images svelte-1c853h2"),r=g(t,"click",i)},m(e,n){o(e,t,n)},p(r,i){e=i,r.image&&n!==(n=e.toThumbnail(e.more))&&d(t,"src",n)},d(e){e&&a(t),r()}}}function Ie(t){var n;function r(e,t){return t.loading?Re:Te}var i=r(0,t),s=i(t);return{c(){s.c(),n=u("")},m(e,t){s.m(e,t),o(e,n,t)},p(e,t){i===(i=r(0,t))&&s?s.p(e,t):(s.d(1),(s=i(t))&&(s.c(),s.m(n.parentNode,n)))},i:e,o:e,d(e){s.d(e),e&&a(n)}}}let je="//dev.himalayanacademy.com/hamsa-images";function Ee(e,t,n){let{checksum:r}=t,i={},s=!0;const l=D.subscribe(e=>{console.dir("view changed",e),"Image"==e.view&&(e=>{let t=e.checksum;n("loading",s=!0),se({checksum:t}).then(e=>{n("image",i=e.image),n("loading",s=!1)})})(e.data)});$(()=>l());return e.$set=(e=>{"checksum"in e&&n("checksum",r=e.checksum)}),{checksum:r,image:i,loading:s,toFilename:e=>"image.jpg",toImageURL:e=>{let t=e.replace("/images/","").replace("/home/devhap/public_html/hamsa-images","");return`${je}/${t}`},toThumbnail:e=>`${je}/_cache/${e}.thumb.jpg`,click_handler:()=>V("Collection",{artist:i.metadata.artist}),click_handler_1:({tag:e})=>V("Collection",{keyword:e}),click_handler_2:({more:e})=>V("Image",{checksum:e})}}class Ze extends O{constructor(e){super(),M(this,e,Ee,Ie,s,["checksum"])}}function He(e){var t,n,i,s,c,u,d=new N({}),m=new F({}),f=new ce({}),b=e.views[e.$currentView.view];if(b)var k=new b({});return{c(){t=h("div"),d.$$.fragment.c(),n=p(),m.$$.fragment.c(),i=p(),f.$$.fragment.c(),s=p(),k&&k.$$.fragment.c(),u=g(window,"popstate",e.pop)},m(e,r){o(e,t,r),E(d,t,null),l(t,n),E(m,t,null),l(t,i),E(f,t,null),l(t,s),k&&E(k,t,null),c=!0},p(e,n){if(b!==(b=n.views[n.$currentView.view])){if(k){C={r:0,c:[],p:C};const e=k;j(e.$$.fragment,1,0,()=>{Z(e,1)}),C.r||r(C.c),C=C.p}b?((k=new b({})).$$.fragment.c(),I(k.$$.fragment,1),E(k,t,null)):k=null}},i(e){c||(I(d.$$.fragment,e),I(m.$$.fragment,e),I(f.$$.fragment,e),k&&I(k.$$.fragment,e),c=!0)},o(e){j(d.$$.fragment,e),j(m.$$.fragment,e),j(f.$$.fragment,e),k&&j(k.$$.fragment,e),c=!1},d(e){e&&a(t),Z(d),Z(m),Z(f),k&&Z(k),u()}}}function Me(e,t,n){let r;var i,s;i=D,s=(e=>{n("$currentView",r=e)}),e.$$.on_destroy.push(function(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}(i,s));const l={InfoPage:pe,Collection:Se,Image:Ze};history.pushState({view:D.view,data:D.data},D.view);return{views:l,pop:e=>{D.set(e.state)},$currentView:r}}return new class extends O{constructor(e){super(),M(this,e,Me,He,s,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
