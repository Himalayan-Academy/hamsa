var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function i(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function p(){return h(" ")}function g(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function d(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function f(e,t){t=""+t,e.data!==t&&(e.data=t)}function m(e,t){(null!=t||e.value)&&(e.value=t)}function y(e,t,n){e.classList[n?"add":"remove"](t)}let b;function k(e){b=e}function v(){if(!b)throw new Error("Function called outside component initialization");return b}function $(e){v().$$.on_destroy.push(e)}const x=[],w=[],_=[],A=[],S=Promise.resolve();let L=!1;function R(e){_.push(e)}function T(){const e=new Set;do{for(;x.length;){const e=x.shift();k(e),j(e.$$)}for(;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];e.has(n)||(n(),e.add(n))}_.length=0}while(x.length);for(;A.length;)A.pop()();L=!1}function j(e){e.fragment&&(e.update(e.dirty),r(e.before_update),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_update.forEach(R))}const z=new Set;let C;function q(e,t){e&&e.i&&(z.delete(e),e.i(t))}function O(e,t,n,r){if(e&&e.o){if(z.has(e))return;z.add(e),C.c.push(()=>{z.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function I(e,n,s){const{fragment:o,on_mount:l,on_destroy:a,after_update:c}=e.$$;o.m(n,s),R(()=>{const n=l.map(t).filter(i);a?a.push(...n):r(n),e.$$.on_mount=[]}),c.forEach(R)}function E(e,t){e.$$.fragment&&(r(e.$$.on_destroy),e.$$.fragment.d(t),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={})}function U(e,t){e.$$.dirty||(x.push(e),L||(L=!0,S.then(T)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function N(t,i,s,o,l,a){const c=b;k(t);const u=i.props||{},h=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:null};let p=!1;var g;h.ctx=s?s(t,u,(e,n,r=n)=>(h.ctx&&l(h.ctx[e],h.ctx[e]=r)&&(h.bound[e]&&h.bound[e](r),p&&U(t,e)),n)):u,h.update(),p=!0,r(h.before_update),h.fragment=o(h.ctx),i.target&&(i.hydrate?h.fragment.l((g=i.target,Array.from(g.childNodes))):h.fragment.c(),i.intro&&q(t.$$.fragment),I(t,i.target,i.anchor),T()),k(c)}class Z{$destroy(){E(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function H(t){var n;return{c(){(n=u("div")).innerHTML='<header><a href="/hamsa" class="logo svelte-elyn56"><img src="images/hamsa-logo-opt.jpg" alt="HAMSA logo" class="hamsa-logo svelte-elyn56"></a> <div class="monastery-header-text"><h1 class="title">Himalayan Academy</h1> <h2 class="subtitle">Museum of Spiritual Arts</h2> <div style="flex: auto"></div></div> <a href="/" class="monastery-logo svelte-elyn56"><img class="monastery-logo svelte-elyn56" src="images/monastery-logo.png" alt="Monastery Logo"></a></header>'},m(e,t){l(e,n,t)},p:e,i:e,o:e,d(e){e&&a(n)}}}class M extends Z{constructor(e){super(),N(this,e,null,H,s,[])}}function F(t){var n;return{c(){(n=u("div")).innerHTML='<div class="hero svelte-nxvt8o"><figure class="hero1 svelte-nxvt8o"><img src="images/hero2.jpg" alt="" class="hero svelte-nxvt8o"></figure> <figure class="hero2 fade svelte-nxvt8o"><img src="images/hero1.jpg" alt=""></figure></div>'},m(e,t){l(e,n,t)},p:e,i:e,o:e,d(e){e&&a(n)}}}class P extends Z{constructor(e){super(),N(this,e,null,F,s,[])}}var B=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),D=new RegExp("%[a-f0-9]{2}","gi"),V=new RegExp("(%[a-f0-9]{2})+","gi");function G(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],G(n),G(r))}function J(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(D),n=1;n<t.length;n++)t=(e=G(t,n).join("")).match(D);return e}}var X=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=V.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=J(n[0]);r!==n[0]&&(t[n[0]]=r)}n=V.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),s=0;s<i.length;s++){var o=i[s];e=e.replace(new RegExp(o,"g"),t[o])}return e}(e)}},Y=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]};function K(e,t){return t.encode?t.strict?B(e):encodeURIComponent(e):e}function Q(e,t){return t.decode?X(e):e}function W(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function ee(e){const t=(e=W(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function te(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function ne(e,t){const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":return(e,t,n)=>{const r="string"==typeof t&&t.split("").indexOf(",")>-1?t.split(","):t;n[e]=r};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1,parseBooleans:!1},t)),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const i of e.split("&")){let[e,s]=Y(i.replace(/\+/g," "),"=");s=void 0===s?null:Q(s,t),n(Q(e,t),s,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=te(n[e],t);else r[e]=te(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(n):e[t]=n,e},Object.create(null))}var re={extract:ee,parse:ne,stringify:(e,t)=>{if(!e)return"";const n=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const i=n.length;return void 0===r?n:null===r?[...n,[K(t,e),"[",i,"]"].join("")]:[...n,[K(t,e),"[",K(i,e),"]=",K(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r?n:null===r?[...n,[K(t,e),"[]"].join("")]:[...n,[K(t,e),"[]=",K(r,e)].join("")];case"comma":return t=>(n,r,i)=>null==r||0===r.length?n:0===i?[[K(t,e),"=",K(r,e)].join("")]:[[n,K(r,e)].join(",")];default:return t=>(n,r)=>void 0===r?n:null===r?[...n,K(t,e)]:[...n,[K(t,e),"=",K(r,e)].join("")]}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),r=Object.keys(e);return!1!==t.sort&&r.sort(t.sort),r.map(r=>{const i=e[r];return void 0===i?"":null===i?K(r,t):Array.isArray(i)?i.reduce(n(r),[]).join("&"):K(r,t)+"="+K(i,t)}).filter(e=>e.length>0).join("&")},parseUrl:(e,t)=>({url:W(e).split("?")[0]||"",query:ne(ee(e),t)})};const ie=[];const se=function(t,n=e){let r;const i=[];function o(e){if(s(t,e)&&(t=e,r)){const e=!ie.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),ie.push(n,t)}if(e){for(let e=0;e<ie.length;e+=2)ie[e][0](ie[e+1]);ie.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,l=e){const a=[s,l];return i.push(a),1===i.length&&(r=n(o)||e),s(t),()=>{const e=i.indexOf(a);-1!==e&&i.splice(e,1),0===i.length&&(r(),r=null)}}}}({view:"Collection",data:{}}),oe=(e,t)=>{let n=re.stringify({view:e,...t});history.pushState({view:e,data:t},`HAMSA - ${e}`,`index.html?${n}`),se.set({view:e,data:t})},le=()=>{let e=re.parse(location.search),t=e.view||"Collection";delete e.view,oe(t,e)};function ae(e,t,n){const r=Object.create(e);return r.item=t[n],r}function ce(e){var t,n,r,i=e.item+"";function s(){return e.click_handler(e)}return{c(){t=u("li"),n=h(i),d(t,"class","list-item svelte-15hgir4"),r=g(t,"click",s)},m(e,r){l(e,t,r),o(t,n)},p(t,r){e=r,t.items&&i!==(i=e.item+"")&&f(n,i)},d(e){e&&a(t),r()}}}function ue(t){var n,r,i,s,m,b,k,v,$;let x=t.items,w=[];for(let e=0;e<x.length;e+=1)w[e]=ce(ae(t,x,e));return{c(){n=u("div"),r=u("div"),i=u("span"),s=h(t.title),m=p(),b=u("i"),k=p(),v=u("ul");for(let e=0;e<w.length;e+=1)w[e].c();d(i,"class","title"),d(b,"class","fa fa-caret-down"),d(r,"class","selector-text svelte-15hgir4"),d(v,"class","selector-content svelte-15hgir4"),y(v,"open",t.open),d(n,"class","round-wrapper is-selector-categories svelte-15hgir4"),$=g(n,"click",t.click_handler_1)},m(e,t){l(e,n,t),o(n,r),o(r,i),o(i,s),o(r,m),o(r,b),o(n,k),o(n,v);for(let e=0;e<w.length;e+=1)w[e].m(v,null)},p(e,t){if(e.title&&f(s,t.title),e.items){let n;for(x=t.items,n=0;n<x.length;n+=1){const r=ae(t,x,n);w[n]?w[n].p(e,r):(w[n]=ce(r),w[n].c(),w[n].m(v,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=x.length}e.open&&y(v,"open",t.open)},i:e,o:e,d(e){e&&a(n),c(w,e),$()}}}function he(e,t,n){let{title:r="untitled",items:i=[],key:s="item"}=t,o=!1;const l=e=>{console.log("clicked",e);let t={};t[s]=e,oe("Collection",t)};return e.$set=(e=>{"title"in e&&n("title",r=e.title),"items"in e&&n("items",i=e.items),"key"in e&&n("key",s=e.key)}),{title:r,items:i,key:s,open:o,onClick:l,click_handler:({item:e})=>{l(e)},click_handler_1:()=>n("open",o=!o)}}class pe extends Z{constructor(e){super(),N(this,e,he,ue,s,["title","items","key"])}}function ge(t){var n,i,s,c,h;return{c(){n=u("div"),i=u("input"),s=p(),c=u("i"),d(i,"class","search svelte-806y3v"),d(i,"placeholder","Search"),d(c,"class","fa fa-search"),d(n,"class","round-wrapper is-search-box svelte-806y3v"),h=[g(i,"input",t.input_input_handler),g(i,"keydown",t.search)]},m(e,r){l(e,n,r),o(n,i),m(i,t.query),o(n,s),o(n,c)},p(e,t){e.query&&i.value!==t.query&&m(i,t.query)},i:e,o:e,d(e){e&&a(n),r(h)}}}function de(e,t,n){let r;return{query:r,search:function(e){"Enter"===e.key&&(console.log("search",r),oe("Collection",{query:r}))},input_input_handler:function(){r=this.value,n("query",r)}}}class fe extends Z{constructor(e){super(),N(this,e,de,ge,s,[])}}var me=function(e){e=Array.isArray(e)?e.join(""):e;var t=ye.exec(e);return function(n){var r={query:e};if(n&&(r.variables=JSON.stringify(n)),t&&t.length){var i=t[2];i&&(r.operationName=t[2])}return JSON.stringify(r)}},ye=/(query|mutation) ?([\w\d-_]+)? ?\(.*?\)? \{/;const be=async()=>{let e=me`
      query {
        collections
        artists
        keywords
      }
    `;return $e(e)},ke=async e=>{let t=me`
    query($limit: Int!, $offset: Int!, $keyword: String, $artist: String, $query: String) { 
        images( limit: $limit offset: $offset keyword: $keyword artist: $artist query: $query  ) { 
          thumbnail, 
          checksum 
        } } 
    `;return $e(t,e)},ve=async e=>{let t=me`
  query($checksum: String!) { 
      image( checksum: $checksum) { 
        path, 
        medpath,
        width,
        height,
        metadata {
          artist,
          description,
          more,
          keywords
        } 
      } } 
  `;return $e(t,e)},$e=async(e,t)=>{try{const n=await fetch("//dev.himalayanacademy.com/hamsa/api/index.php",{body:e(t),method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}});return(await n.json()).data}catch(e){throw console.error("GraphQL Error",e),e}};function xe(e){var t,n,r,i,s,c,h,f,m=new pe({props:{title:"Tags",key:"keyword",items:e.keywordList}}),y=new pe({props:{title:"Artists",key:"artist",items:e.artistsList}}),b=new pe({props:{title:"Collections",key:"collection",items:e.collectionList}}),k=new fe({});return{c(){t=u("div"),(n=u("div")).innerHTML="<span>i</span>",r=p(),m.$$.fragment.c(),i=p(),y.$$.fragment.c(),s=p(),b.$$.fragment.c(),c=p(),k.$$.fragment.c(),d(n,"class","bolotinha svelte-1qalh13"),d(t,"class","selector-controls svelte-1qalh13"),f=g(n,"click",e.goInfo)},m(e,a){l(e,t,a),o(t,n),o(t,r),I(m,t,null),o(t,i),I(y,t,null),o(t,s),I(b,t,null),o(t,c),I(k,t,null),h=!0},p(e,t){var n={};e.keywordList&&(n.items=t.keywordList),m.$set(n);var r={};e.artistsList&&(r.items=t.artistsList),y.$set(r);var i={};e.collectionList&&(i.items=t.collectionList),b.$set(i)},i(e){h||(q(m.$$.fragment,e),q(y.$$.fragment,e),q(b.$$.fragment,e),q(k.$$.fragment,e),h=!0)},o(e){O(m.$$.fragment,e),O(y.$$.fragment,e),O(b.$$.fragment,e),O(k.$$.fragment,e),h=!1},d(e){e&&a(t),E(m),E(y),E(b),E(k),f()}}}function we(e,t,n){let r=[],i=[],s=[];var o;o=(async()=>{let e=await be();n("artistsList",r=e.artists.sort()),n("collectionList",i=e.collections.sort()),n("keywordList",s=e.keywords.sort()),console.log("selectors data",e)}),v().$$.on_mount.push(o);return{artistsList:r,collectionList:i,keywordList:s,goInfo:()=>{oe("InfoPage")}}}class _e extends Z{constructor(e){super(),N(this,e,we,xe,s,[])}}function Ae(t){var n,r,i,s,c;return{c(){n=u("div"),(r=u("div")).innerHTML='<h1 id="welcome-to-hamsa">Welcome to HAMSA</h1> <p>Indian spiritual art has no equal in the world, either in scope or sheer quantity. For five decades the monks\n\t\t\t            at Kauai’s Hindu Monastery in Hawaii have been commissioning and collecting original works of art for our\n\t\t\t            many publications, apps and web projects. Among the thousands of images you will find rare masterpieces,\n\t\t\t            educational depictions of Hindu culture, legend, deities and philosophy, sacred religious symbols,\n\t\t\t            illustrated alphabets, children’s stories and decorative borders. For decades this treasure trove was hidden\n\t\t\t            in the binary recesses of our server (even we could barely find things). Now the entire collection is\n\t\t\t            available to you through the Himalayan Academy Museum of Spiritual Art. In Sanskrit hamsa is the word for\n\t\t\t            the Indian Goose (Anser indicus) or a swan, and represents the Ultimate Reality and the spiritually pure\n\t\t\t            soul. The flight of the hamsa symbolizes moksha, the release from the cycle of samsara.</p> <p>You can search by key word, artist or collection. The download button will save the highest available\n\t\t\t            resolution file to your computer. You may use these images freely in service to dharma. However, if your use\n\t\t\t            is commercial, you must get written permission from the copyright holder, Himalayan Academy, by writing to:\n\t\t\t            <a href="mailto:contact@hindu.org">contact@hindu.org</a>.</p>',i=p(),(s=u("button")).textContent="Go back",d(s,"class","back-button svelte-5zgyg"),d(n,"class","info info-blurb svelte-5zgyg"),c=g(s,"click",Se)},m(e,t){l(e,n,t),o(n,r),o(n,i),o(n,s)},p:e,i:e,o:e,d(e){e&&a(n),c()}}}const Se=()=>history.back();class Le extends Z{constructor(e){super(),N(this,e,null,Ae,s,[])}}var Re,Te=(function(e,t){!function(t){var n={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:m,table:m,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function r(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||x.defaults,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.rules=n.gfm)}n._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,n._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,n.def=p(n.def).replace("label",n._label).replace("title",n._title).getRegex(),n.bullet=/(?:[*+-]|\d{1,9}\.)/,n.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,n.item=p(n.item,"gm").replace(/bull/g,n.bullet).getRegex(),n.list=p(n.list).replace(/bull/g,n.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+n.def.source+")").getRegex(),n._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",n._comment=/<!--(?!-?>)[\s\S]*?-->/,n.html=p(n.html,"i").replace("comment",n._comment).replace("tag",n._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),n.paragraph=p(n._paragraph).replace("hr",n.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",n._tag).getRegex(),n.blockquote=p(n.blockquote).replace("paragraph",n.paragraph).getRegex(),n.normal=y({},n),n.gfm=y({},n.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),n.pedantic=y({},n.normal,{html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",n._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:m,paragraph:p(n.normal._paragraph).replace("hr",n.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",n.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),r.rules=n,r.lex=function(e,t){return new r(t).lex(e)},r.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},r.prototype.token=function(e,t){var r,i,s,o,l,a,c,h,p,g,d,f,m,y,v,$;for(e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e)){var x=this.tokens[this.tokens.length-1];e=e.substring(s[0].length),x&&"paragraph"===x.type?x.text+="\n"+s[0].trimRight():(s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?s:k(s,"\n")}))}else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2]?s[2].trim():s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if((s=this.rules.nptable.exec(e))&&(a={type:"table",header:b(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(s[0].length),d=0;d<a.align.length;d++)/^ *-+: *$/.test(a.align[d])?a.align[d]="right":/^ *:-+: *$/.test(a.align[d])?a.align[d]="center":/^ *:-+ *$/.test(a.align[d])?a.align[d]="left":a.align[d]=null;for(d=0;d<a.cells.length;d++)a.cells[d]=b(a.cells[d],a.header.length);this.tokens.push(a)}else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),c={type:"list_start",ordered:y=(o=s[2]).length>1,start:y?+o:"",loose:!1},this.tokens.push(c),h=[],r=!1,m=(s=s[0].match(this.rules.item)).length,d=0;d<m;d++)g=(a=s[d]).length,~(a=a.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(g-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+g+"}","gm"),"")),d!==m-1&&(l=n.bullet.exec(s[d+1])[0],(o.length>1?1===l.length:l.length>1||this.options.smartLists&&l!==o)&&(e=s.slice(d+1).join("\n")+e,d=m-1)),i=r||/\n\n(?!\s*$)/.test(a),d!==m-1&&(r="\n"===a.charAt(a.length-1),i||(i=r)),i&&(c.loose=!0),$=void 0,(v=/^\[[ xX]\] /.test(a))&&($=" "!==a[1],a=a.replace(/^\[[ xX]\] +/,"")),p={type:"list_item_start",task:v,checked:$,loose:i},h.push(p),this.tokens.push(p),this.token(a,!1),this.tokens.push({type:"list_item_end"});if(c.loose)for(m=h.length,d=0;d<m;d++)h[d].loose=!0;this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):u(s[0]):s[0]});else if(t&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),f=s[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[f]||(this.tokens.links[f]={href:s[2],title:s[3]});else if((s=this.rules.table.exec(e))&&(a={type:"table",header:b(s[1].replace(/^ *| *\| *$/g,"")),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3]?s[3].replace(/\n$/,"").split("\n"):[]}).header.length===a.align.length){for(e=e.substring(s[0].length),d=0;d<a.align.length;d++)/^ *-+: *$/.test(a.align[d])?a.align[d]="right":/^ *:-+: *$/.test(a.align[d])?a.align[d]="center":/^ *:-+ *$/.test(a.align[d])?a.align[d]="left":a.align[d]=null;for(d=0;d<a.cells.length;d++)a.cells[d]=b(a.cells[d].replace(/^ *\| *| *\| *$/g,""),a.header.length);this.tokens.push(a)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2].charAt(0)?1:2,text:s[1]});else if(t&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var i={escape:/^\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:m,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:m,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function s(e,t){if(this.options=t||x.defaults,this.links=e,this.rules=i.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.options.breaks?this.rules=i.breaks:this.rules=i.gfm)}function o(e){this.options=e||x.defaults}function l(){}function a(e){this.tokens=[],this.token=null,this.options=e||x.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new c}function c(){this.seen={}}function u(e,t){if(t){if(u.escapeTest.test(e))return e.replace(u.escapeReplace,function(e){return u.replacements[e]})}else if(u.escapeTestNoEncode.test(e))return e.replace(u.escapeReplaceNoEncode,function(e){return u.replacements[e]});return e}function h(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function p(e,t){return e=e.source||e,t=t||"",{replace:function(t,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),e=e.replace(t,n),this},getRegex:function(){return new RegExp(e,t)}}}function g(e,t,n){if(e){try{var r=decodeURIComponent(h(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!f.test(n)&&(n=function(e,t){d[" "+e]||(/^[^:]+:\/*[^\/]*$/.test(e)?d[" "+e]=e+"/":d[" "+e]=k(e,"/",!0));return e=d[" "+e],"//"===t.slice(0,2)?e.replace(/:[\s\S]*/,":")+t:"/"===t.charAt(0)?e.replace(/(:\/*[^\/]*)[\s\S]*/,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n}i._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",i.em=p(i.em).replace(/punctuation/g,i._punctuation).getRegex(),i._escapes=/\\([!"#$%&'()*+,\-.\/:;<=>?@\[\]\\^_`{|}~])/g,i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,i._email=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,i.autolink=p(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex(),i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,i.tag=p(i.tag).replace("comment",n._comment).replace("attribute",i._attribute).getRegex(),i._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,i._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,i.link=p(i.link).replace("label",i._label).replace("href",i._href).replace("title",i._title).getRegex(),i.reflink=p(i.reflink).replace("label",i._label).getRegex(),i.normal=y({},i),i.pedantic=y({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",i._label).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",i._label).getRegex()}),i.gfm=y({},i.normal,{escape:p(i.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),i.gfm.url=p(i.gfm.url,"i").replace("email",i.gfm._extended_email).getRegex(),i.breaks=y({},i.gfm,{br:p(i.br).replace("{2,}","*").getRegex(),text:p(i.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),s.rules=i,s.output=function(e,t,n){return new s(t,n).output(e)},s.prototype.output=function(e){for(var t,n,r,i,o,l,a="";e;)if(o=this.rules.escape.exec(e))e=e.substring(o[0].length),a+=u(o[1]);else if(o=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(o[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(o[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(o[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(o[0])&&(this.inRawBlock=!1),e=e.substring(o[0].length),a+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):u(o[0]):o[0];else if(o=this.rules.link.exec(e)){var c=v(o[2],"()");if(c>-1){var h=4+o[1].length+c;o[2]=o[2].substring(0,c),o[0]=o[0].substring(0,h).trim(),o[3]=""}e=e.substring(o[0].length),this.inLink=!0,r=o[2],this.options.pedantic?(t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=t[1],i=t[3]):i="":i=o[3]?o[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),a+=this.outputLink(o,{href:s.escapes(r),title:s.escapes(i)}),this.inLink=!1}else if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){if(e=e.substring(o[0].length),t=(o[2]||o[1]).replace(/\s+/g," "),!(t=this.links[t.toLowerCase()])||!t.href){a+=o[0].charAt(0),e=o[0].substring(1)+e;continue}this.inLink=!0,a+=this.outputLink(o,t),this.inLink=!1}else if(o=this.rules.strong.exec(e))e=e.substring(o[0].length),a+=this.renderer.strong(this.output(o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.em.exec(e))e=e.substring(o[0].length),a+=this.renderer.em(this.output(o[6]||o[5]||o[4]||o[3]||o[2]||o[1]));else if(o=this.rules.code.exec(e))e=e.substring(o[0].length),a+=this.renderer.codespan(u(o[2].trim(),!0));else if(o=this.rules.br.exec(e))e=e.substring(o[0].length),a+=this.renderer.br();else if(o=this.rules.del.exec(e))e=e.substring(o[0].length),a+=this.renderer.del(this.output(o[1]));else if(o=this.rules.autolink.exec(e))e=e.substring(o[0].length),r="@"===o[2]?"mailto:"+(n=u(this.mangle(o[1]))):n=u(o[1]),a+=this.renderer.link(r,null,n);else if(this.inLink||!(o=this.rules.url.exec(e))){if(o=this.rules.text.exec(e))e=e.substring(o[0].length),this.inRawBlock?a+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):u(o[0]):o[0]):a+=this.renderer.text(u(this.smartypants(o[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else{if("@"===o[2])r="mailto:"+(n=u(o[0]));else{do{l=o[0],o[0]=this.rules._backpedal.exec(o[0])[0]}while(l!==o[0]);n=u(o[0]),r="www."===o[1]?"http://"+n:n}e=e.substring(o[0].length),a+=this.renderer.link(r,null,n)}return a},s.escapes=function(e){return e?e.replace(s.rules._escapes,"$1"):e},s.prototype.outputLink=function(e,t){var n=t.href,r=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,u(e[1]))},s.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},s.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},o.prototype.code=function(e,t,n){var r=(t||"").match(/\S*/)[0];if(this.options.highlight){var i=this.options.highlight(e,r);null!=i&&i!==e&&(n=!0,e=i)}return r?'<pre><code class="'+this.options.langPrefix+u(r,!0)+'">'+(n?e:u(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"</code></pre>"},o.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},o.prototype.html=function(e){return e},o.prototype.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},o.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},o.prototype.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},o.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},o.prototype.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},o.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},o.prototype.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},o.prototype.strong=function(e){return"<strong>"+e+"</strong>"},o.prototype.em=function(e){return"<em>"+e+"</em>"},o.prototype.codespan=function(e){return"<code>"+e+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(e){return"<del>"+e+"</del>"},o.prototype.link=function(e,t,n){if(null===(e=g(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+u(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},o.prototype.image=function(e,t,n){if(null===(e=g(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},o.prototype.text=function(e){return e},l.prototype.strong=l.prototype.em=l.prototype.codespan=l.prototype.del=l.prototype.text=function(e){return e},l.prototype.link=l.prototype.image=function(e,t,n){return""+n},l.prototype.br=function(){return""},a.parse=function(e,t){return new a(t).parse(e)},a.prototype.parse=function(e){this.inline=new s(e.links,this.options),this.inlineText=new s(e.links,y({},this.options,{renderer:new l})),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},a.prototype.next=function(){return this.token=this.tokens.pop(),this.token},a.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},a.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},a.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,h(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i="",s="";for(n="",e=0;e<this.token.header.length;e++)n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(i+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",r=0;r<t.length;r++)n+=this.renderer.tablecell(this.inline.output(t[r]),{header:!1,align:this.token.align[r]});s+=this.renderer.tablerow(n)}return this.renderer.table(i,s);case"blockquote_start":for(s="";"blockquote_end"!==this.next().type;)s+=this.tok();return this.renderer.blockquote(s);case"list_start":s="";for(var o=this.token.ordered,l=this.token.start;"list_end"!==this.next().type;)s+=this.tok();return this.renderer.list(s,o,l);case"list_item_start":s="";var a=this.token.loose,c=this.token.checked,u=this.token.task;for(this.token.task&&(s+=this.renderer.checkbox(c));"list_item_end"!==this.next().type;)s+=a||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(s,u,c);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var p='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(p);console.log(p)}},c.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,.\/:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){var n=t;do{this.seen[n]++,t=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t},u.escapeTest=/[&<>"']/,u.escapeReplace=/[&<>"']/g,u.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,u.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var d={},f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function m(){}function y(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function b(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,i=t;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function k(e,t,n){if(0===e.length)return"";for(var r=0;r<e.length;){var i=e.charAt(e.length-r-1);if(i!==t||n){if(i===t||!n)break;r++}else r++}return e.substr(0,e.length-r)}function v(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=0,r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&--n<0)return r;return-1}function $(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function x(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(n||"function"==typeof t){n||(n=t,t=null),$(t=y({},x.defaults,t||{}));var i,s,o=t.highlight,l=0;try{i=r.lex(e,t)}catch(e){return n(e)}s=i.length;var c=function(e){if(e)return t.highlight=o,n(e);var r;try{r=a.parse(i,t)}catch(t){e=t}return t.highlight=o,e?n(e):n(null,r)};if(!o||o.length<3)return c();if(delete t.highlight,!s)return c();for(;l<i.length;l++)!function(e){"code"!==e.type?--s||c():o(e.text,e.lang,function(t,n){return t?c(t):null==n||n===e.text?--s||c():(e.text=n,e.escaped=!0,void(--s||c()))})}(i[l])}else try{return t&&(t=y({},x.defaults,t)),$(t),a.parse(r.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||x.defaults).silent)return"<p>An error occurred:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}m.exec=m,x.options=x.setOptions=function(e){return y(x.defaults,e),x},x.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new o,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},x.defaults=x.getDefaults(),x.Parser=a,x.parser=a.parse,x.Renderer=o,x.TextRenderer=l,x.Lexer=r,x.lexer=r.lex,x.InlineLexer=s,x.inlineLexer=s.output,x.Slugger=c,x.parse=x,e.exports=x}()}(Re={exports:{}},Re.exports),Re.exports);function je(e,t,n){const r=Object.create(e);return r.item=t[n],r}function ze(e){var t,n,r,i,s,h="home"!==e.collection&&qe(e);let g=e.images,f=[];for(let t=0;t<g.length;t+=1)f[t]=Ee(je(e,g,t));let m=null;return g.length||(m=Ie(e)).c(),{c(){h&&h.c(),t=p(),n=u("div"),r=u("div"),i=p(),s=u("section");for(let e=0;e<f.length;e+=1)f[e].c();d(r,"class","collection-inner svelte-2ovhb3"),d(s,"class","g svelte-2ovhb3"),d(n,"class","collection")},m(e,a){h&&h.m(e,a),l(e,t,a),l(e,n,a),o(n,r),o(n,i),o(n,s);for(let e=0;e<f.length;e+=1)f[e].m(s,null);m&&m.m(s,null)},p(e,n){if("home"!==n.collection?h?h.p(e,n):((h=qe(n)).c(),h.m(t.parentNode,t)):h&&(h.d(1),h=null),e.thumbnailToURL||e.images||e.collection){let t;for(g=n.images,t=0;t<g.length;t+=1){const r=je(n,g,t);f[t]?f[t].p(e,r):(f[t]=Ee(r),f[t].c(),f[t].m(s,null))}for(;t<f.length;t+=1)f[t].d(1);f.length=g.length}!g.length&&m?m.p(e,n):g.length?m&&(m.d(1),m=null):((m=Ie(n)).c(),m.m(s,null))},d(e){h&&h.d(e),e&&(a(t),a(n)),c(f,e),m&&m.d()}}}function Ce(t){var n;return{c(){(n=u("div")).innerHTML='<i class="fa fa-spinner fa-spin fa-3x"></i>',d(n,"class","loading-wrapper")},m(e,t){l(e,n,t)},p:e,d(e){e&&a(n)}}}function qe(e){var t,n,r,i,s,c,g,m=e.collectionThumb&&Oe(e);return{c(){t=u("div"),n=u("h3"),r=h(e.collection),i=p(),s=u("div"),m&&m.c(),c=p(),g=u("p"),d(n,"class","collection-title svelte-2ovhb3"),d(g,"class","collection-description svelte-2ovhb3"),d(s,"class","collection-metadata svelte-2ovhb3"),d(t,"class","collection-header svelte-2ovhb3")},m(a,u){l(a,t,u),o(t,n),o(n,r),o(t,i),o(t,s),m&&m.m(s,null),o(s,c),o(s,g),g.innerHTML=e.description},p(e,t){e.collection&&f(r,t.collection),t.collectionThumb?m?m.p(e,t):((m=Oe(t)).c(),m.m(s,c)):m&&(m.d(1),m=null),e.description&&(g.innerHTML=t.description)},d(e){e&&a(t),m&&m.d()}}}function Oe(e){var t,n,r;return{c(){d(t=u("img"),"src",e.collectionThumb),d(t,"alt",n="photo: "+e.collection),d(t,"class","svelte-2ovhb3"),y(t,"hidden",!e.collectionThumb),r=g(t,"error",e.error_handler)},m(e,n){l(e,t,n)},p(e,r){e.collectionThumb&&d(t,"src",r.collectionThumb),e.collection&&n!==(n="photo: "+r.collection)&&d(t,"alt",n),e.collectionThumb&&y(t,"hidden",!r.collectionThumb)},d(e){e&&a(t),r()}}}function Ie(e){var t,n,r,i;return{c(){t=u("p"),n=h("Sorry but we couldn't find images related to "),r=h(e.collection),i=h(".\r\n          "),d(t,"class","no-collection svelte-2ovhb3")},m(e,s){l(e,t,s),o(t,n),o(t,r),o(t,i)},p(e,t){e.collection&&f(r,t.collection)},d(e){e&&a(t)}}}function Ee(e){var t,n,r,i,s,c;function h(){return e.click_handler(e)}return{c(){t=u("div"),n=u("figure"),r=u("img"),s=p(),d(r,"src",i=e.thumbnailToURL(e.item.thumbnail)),d(r,"alt",""),d(r,"class","svelte-2ovhb3"),d(n,"class","svelte-2ovhb3"),d(t,"class","gi svelte-2ovhb3"),c=g(n,"click",h)},m(e,i){l(e,t,i),o(t,n),o(n,r),o(t,s)},p(t,n){e=n,t.images&&i!==(i=e.thumbnailToURL(e.item.thumbnail))&&d(r,"src",i)},d(e){e&&a(t),c()}}}function Ue(t){var n;function r(e,t){return 0==t.images.length?Ce:ze}var i=r(0,t),s=i(t);return{c(){n=u("div"),s.c()},m(e,t){l(e,n,t),s.m(n,null)},p(e,t){i===(i=r(0,t))&&s?s.p(e,t):(s.d(1),(s=i(t))&&(s.c(),s.m(n,null)))},i:e,o:e,d(e){e&&a(n),s.d()}}}let Ne=0,Ze="//dev.himalayanacademy.com/hamsa-images";function He(e,t,n){let r="",i=[],s="home",o=!1;const l=e=>{let t=e.toLowerCase().replace(/\s+/g,"-").replace(/\./g,"");fetch(`//dev.himalayanacademy.com/hamsa-images/_texts/${t}.txt`).then(e=>e.text()).then(e=>n("description",r=Te(e)))},a=e=>{let t=e.toLowerCase().replace(/\s+/g,"-").replace(/\./g,"");n("collectionThumb",o=`//dev.himalayanacademy.com/hamsa-images/_artists/${t}.jpg`)},c=se.subscribe(e=>{"Collection"==e.view&&(console.dir("view changed",e),(e=>{let t={};if(n("images",i=[]),n("collectionThumb",o=!1),n("description",r=""),!e)return!1;if(t={limit:50,offset:Ne},e.collection&&"home"!==e.collection){let r=`Collection ${e.collection}`;t.keyword=r,n("collection",s=e.collection),l(r),document.title=`HAMSA - collection: ${r}`}e.keyword&&(t.keyword=e.keyword,n("collection",s=e.keyword),l(e.keyword),document.title=`HAMSA - tag: ${e.keyword}`),e.artist&&(t.artist=e.artist,n("collection",s=e.artist),l(e.artist),a(e.artist),document.title=`HAMSA - Artist: ${e.artist}`),e.query&&(t.query=e.query,n("collection",s=e.query),document.title=`HAMSA - Search: ${e.query}`),console.dir("getting collection",t),ke(t).then(e=>{n("images",i=e.images)})})(e.data))});$(()=>c());return{description:r,images:i,collection:s,collectionThumb:o,thumbnailToURL:e=>{let t=e.replace("/images/","");return`${Ze}/${t}`},error_handler:()=>n("collectionThumb",o=!1),click_handler:({item:e})=>oe("Image",{checksum:e.checksum})}}class Me extends Z{constructor(e){super(),N(this,e,He,Ue,s,[])}}function Fe(e,t,n){const r=Object.create(e);return r.more=t[n],r}function Pe(e,t,n){const r=Object.create(e);return r.tag=t[n],r}function Be(e){var t,n,r,i,s,m,y,b,k,v,$,x,w,_,A,S,L,R,T,j,z,C,q,O,I,E,U,N,Z,H,M,F,P,B=e.image.metadata.description+"",D=e.image.metadata.artist+"";let V=e.image.metadata.keywords,G=[];for(let t=0;t<V.length;t+=1)G[t]=Ve(Pe(e,V,t));let J=e.image.metadata.more,X=[];for(let t=0;t<J.length;t+=1)X[t]=Ge(Fe(e,J,t));return{c(){t=u("div"),n=u("div"),r=u("div"),i=u("img"),y=p(),b=u("a"),k=h("Download this image"),x=p(),w=u("p"),_=h(B),A=p(),S=u("div"),L=u("div"),R=u("i"),T=p(),j=u("h2"),z=h(D),C=p(),q=u("div"),O=p(),I=u("div"),(E=u("h2")).textContent="Tags",U=p();for(let e=0;e<G.length;e+=1)G[e].c();N=p(),Z=u("div"),H=p(),(M=u("h3")).textContent="More by the same artist",F=p();for(let e=0;e<X.length;e+=1)X[e].c();d(i,"src",s=e.toImageURL(e.image.medpath)),d(i,"alt",m=e.image.metadata.description),d(b,"href",v=e.toImageURL(e.image.path)),d(b,"target","_blank"),d(b,"download",$=e.toFilename(e.image.path)),d(b,"class","single-image-link svelte-1c853h2"),d(w,"class","description svelte-1c853h2"),d(r,"class","single-image"),d(R,"class","far fa-user fa-lg"),d(L,"class","author svelte-1c853h2"),d(q,"class","dotted"),d(I,"class","tags"),d(Z,"class","dotted"),d(S,"class","metadata"),d(n,"class","single-image-wrapper svelte-1c853h2"),d(t,"class","image-view-container svelte-1c853h2"),P=g(L,"click",e.click_handler)},m(e,s){l(e,t,s),o(t,n),o(n,r),o(r,i),o(r,y),o(r,b),o(b,k),o(r,x),o(r,w),o(w,_),o(n,A),o(n,S),o(S,L),o(L,R),o(L,T),o(L,j),o(j,z),o(S,C),o(S,q),o(S,O),o(S,I),o(I,E),o(I,U);for(let e=0;e<G.length;e+=1)G[e].m(I,null);o(S,N),o(S,Z),o(S,H),o(S,M),o(S,F);for(let e=0;e<X.length;e+=1)X[e].m(S,null)},p(e,t){if(e.image&&s!==(s=t.toImageURL(t.image.medpath))&&d(i,"src",s),e.image&&m!==(m=t.image.metadata.description)&&d(i,"alt",m),e.image&&v!==(v=t.toImageURL(t.image.path))&&d(b,"href",v),e.image&&$!==($=t.toFilename(t.image.path))&&d(b,"download",$),e.image&&B!==(B=t.image.metadata.description+"")&&f(_,B),e.image&&D!==(D=t.image.metadata.artist+"")&&f(z,D),e.image){let n;for(V=t.image.metadata.keywords,n=0;n<V.length;n+=1){const r=Pe(t,V,n);G[n]?G[n].p(e,r):(G[n]=Ve(r),G[n].c(),G[n].m(I,null))}for(;n<G.length;n+=1)G[n].d(1);G.length=V.length}if(e.toThumbnail||e.image){let n;for(J=t.image.metadata.more,n=0;n<J.length;n+=1){const r=Fe(t,J,n);X[n]?X[n].p(e,r):(X[n]=Ge(r),X[n].c(),X[n].m(S,null))}for(;n<X.length;n+=1)X[n].d(1);X.length=J.length}},d(e){e&&a(t),c(G,e),c(X,e),P()}}}function De(t){var n;return{c(){(n=u("div")).innerHTML='<i class="fa fa-spinner fa-spin fa-3x"></i>',d(n,"class","loading-wrapper")},m(e,t){l(e,n,t)},p:e,d(e){e&&a(n)}}}function Ve(e){var t,n,r,i,s=e.tag+"";function c(){return e.click_handler_1(e)}return{c(){t=u("span"),n=h(s),r=p(),d(t,"class","tag svelte-1c853h2"),i=g(t,"click",c)},m(e,i){l(e,t,i),o(t,n),o(t,r)},p(t,r){e=r,t.image&&s!==(s=e.tag+"")&&f(n,s)},d(e){e&&a(t),i()}}}function Ge(e){var t,n,r;function i(){return e.click_handler_2(e)}return{c(){d(t=u("img"),"src",n=e.toThumbnail(e.more)),d(t,"alt","more"),d(t,"class","more-images svelte-1c853h2"),r=g(t,"click",i)},m(e,n){l(e,t,n)},p(r,i){e=i,r.image&&n!==(n=e.toThumbnail(e.more))&&d(t,"src",n)},d(e){e&&a(t),r()}}}function Je(t){var n;function r(e,t){return t.loading?De:Be}var i=r(0,t),s=i(t);return{c(){s.c(),n=h("")},m(e,t){s.m(e,t),l(e,n,t)},p(e,t){i===(i=r(0,t))&&s?s.p(e,t):(s.d(1),(s=i(t))&&(s.c(),s.m(n.parentNode,n)))},i:e,o:e,d(e){s.d(e),e&&a(n)}}}let Xe="//dev.himalayanacademy.com/hamsa-images";function Ye(e,t,n){let{checksum:r}=t,i={},s=!0;const o=se.subscribe(e=>{console.dir("view changed",e),"Image"==e.view&&(e=>{let t=e.checksum;n("loading",s=!0),ve({checksum:t}).then(e=>{n("image",i=e.image),n("loading",s=!1)})})(e.data)});$(()=>o());return e.$set=(e=>{"checksum"in e&&n("checksum",r=e.checksum)}),{checksum:r,image:i,loading:s,toFilename:e=>"image.jpg",toImageURL:e=>{let t=e.replace("/images/","").replace("/home/devhap/public_html/hamsa-images","");return`${Xe}/${t}`},toThumbnail:e=>`${Xe}/_cache/${e}.thumb.jpg`,click_handler:()=>oe("Collection",{artist:i.metadata.artist}),click_handler_1:({tag:e})=>oe("Collection",{keyword:e}),click_handler_2:({more:e})=>oe("Image",{checksum:e})}}class Ke extends Z{constructor(e){super(),N(this,e,Ye,Je,s,["checksum"])}}function Qe(e){var t,n,i,s,c,h,d=new M({}),f=new P({}),m=new _e({}),y=e.views[e.$currentView.view];if(y)var b=new y({});return{c(){t=u("div"),d.$$.fragment.c(),n=p(),f.$$.fragment.c(),i=p(),m.$$.fragment.c(),s=p(),b&&b.$$.fragment.c(),h=g(window,"popstate",e.pop)},m(e,r){l(e,t,r),I(d,t,null),o(t,n),I(f,t,null),o(t,i),I(m,t,null),o(t,s),b&&I(b,t,null),c=!0},p(e,n){if(y!==(y=n.views[n.$currentView.view])){if(b){C={r:0,c:[],p:C};const e=b;O(e.$$.fragment,1,0,()=>{E(e,1)}),C.r||r(C.c),C=C.p}y?((b=new y({})).$$.fragment.c(),q(b.$$.fragment,1),I(b,t,null)):b=null}},i(e){c||(q(d.$$.fragment,e),q(f.$$.fragment,e),q(m.$$.fragment,e),b&&q(b.$$.fragment,e),c=!0)},o(e){O(d.$$.fragment,e),O(f.$$.fragment,e),O(m.$$.fragment,e),b&&O(b.$$.fragment,e),c=!1},d(e){e&&a(t),E(d),E(f),E(m),b&&E(b),h()}}}function We(e,t,n){let r;var i,s;i=se,s=(e=>{n("$currentView",r=e)}),e.$$.on_destroy.push(function(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}(i,s));const o={InfoPage:Le,Collection:Me,Image:Ke};le();return{views:o,pop:e=>{se.set(e.state)},$currentView:r}}return new class extends Z{constructor(e){super(),N(this,e,We,Qe,s,[])}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
